"use strict";(self.webpackChunkjilyas_github_io=self.webpackChunkjilyas_github_io||[]).push([[397],{"./src/modules/OperationForm/OperationForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>OperationForm_stories});var index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),yup=__webpack_require__("./node_modules/@hookform/resolvers/yup/dist/yup.mjs"),yup_index_esm=__webpack_require__("./node_modules/yup/index.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react_select_esm=__webpack_require__("./node_modules/react-select/dist/react-select.esm.js"),components=__webpack_require__("./src/components/index.tsx"),income_icon=__webpack_require__("./src/shared/assets/icons/income-icon.svg"),expense_icon=__webpack_require__("./src/shared/assets/icons/expense-icon.svg"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),OperationForm_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/modules/OperationForm/OperationForm.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(OperationForm_module.Z,options);const OperationForm_OperationForm_module=OperationForm_module.Z&&OperationForm_module.Z.locals?OperationForm_module.Z.locals:void 0;var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var schema=yup_index_esm.Ry({type:yup_index_esm.Z_().required("Поле 'Тип' является обязательным полем"),title:yup_index_esm.Z_().max(100,"Поле 'Заголовок' должно содержать не более 100 символов").required("Поле 'Заголовок' является обязательным полем"),description:yup_index_esm.Z_().max(256,"Поле 'Описание' должно содержать не более 256 символов"),price:yup_index_esm.Z_().required("Поле 'Цена' является обязательным полем"),operationType:yup_index_esm.nK().nullable().required("Поле 'Тип операции' является обязательным полем")}),OperationForm_options=[{value:"food",label:"Еда"},{value:"salary",label:"Зарплата"},{value:"product",label:"Продукты"},{value:"shop",label:"Одежда"},{value:"other",label:"Прочее"}],OperationForm=function OperationForm(_ref){var operation=_ref.operation,isOpen=_ref.isOpen,onClose=_ref.onClose,_useState2=_slicedToArray((0,react.useState)({id:"",type:"",title:"",description:"",price:"",operationType:""}),2),defaultValues=_useState2[0],setDefaultValue=_useState2[1],_useForm=(0,index_esm.cI)({resolver:(0,yup.X)(schema),mode:"onSubmit",defaultValues}),control=_useForm.control,setValue=_useForm.setValue,clearErrors=_useForm.clearErrors,reset=_useForm.reset,handleSubmit=_useForm.handleSubmit;(0,react.useEffect)((function(){setDefaultValue(operation?{id:operation.id,type:operation.type,title:operation.title,description:operation.description,price:operation.price,operationType:operation.category.type}:{id:null,type:"",title:"",description:"",price:"",operationType:""})}),[operation]),(0,react.useEffect)((function(){isOpen?(setValue("id",defaultValues.id),setValue("type",defaultValues.type),setValue("title",defaultValues.title),setValue("description",defaultValues.description),setValue("price",defaultValues.price),setValue("operationType",defaultValues.operationType)):(setValue("id",null),setValue("type",""),setValue("title",""),setValue("description",""),setValue("price",""),setValue("operationType",""),clearErrors())}),[defaultValues,operation,isOpen]);return(0,jsx_runtime.jsxs)("form",{className:OperationForm_OperationForm_module.operationForm,onSubmit:handleSubmit((function onSubmit(data){console.log(data),reset({type:"",title:"",description:"",price:"",operationType:""})})),children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_esm.Qr,{name:"type",control,render:function render(_ref2){var field=_ref2.field,error=_ref2.fieldState.error;return(0,jsx_runtime.jsxs)("div",{className:OperationForm_OperationForm_module.checkboxGroup,children:[(0,jsx_runtime.jsxs)("div",{className:OperationForm_OperationForm_module.checkboxGroup_label,children:[(0,jsx_runtime.jsx)("span",{children:"Тип"})," ",(0,jsx_runtime.jsx)("span",{className:OperationForm_OperationForm_module.checkboxGroup_label_required,children:"*"})]}),(0,jsx_runtime.jsxs)("label",_objectSpread(_objectSpread({},field),{},{className:OperationForm_OperationForm_module.checkboxGroup_wrap,children:[(0,jsx_runtime.jsx)(components.XZ,{id:"income",name:"type",value:"income",isIcon:!0,checked:"income"===field.value,label:(0,jsx_runtime.jsx)("div",{className:classnames_default()(OperationForm_OperationForm_module.icon,OperationForm_OperationForm_module.icon__income),children:(0,jsx_runtime.jsx)(income_icon.Z,{})})}),(0,jsx_runtime.jsx)(components.XZ,{id:"expense",name:"type",value:"expense",checked:"expense"===field.value,isIcon:!0,label:(0,jsx_runtime.jsx)("div",{className:classnames_default()(OperationForm_OperationForm_module.icon,OperationForm_OperationForm_module.icon__expense),children:(0,jsx_runtime.jsx)(expense_icon.Z,{})})})]})),error&&(0,jsx_runtime.jsx)("div",{className:OperationForm_OperationForm_module.icon_error,children:null==error?void 0:error.message})]})}}),(0,jsx_runtime.jsxs)("div",{className:OperationForm_OperationForm_module.operationForm_group,children:[(0,jsx_runtime.jsx)(index_esm.Qr,{name:"title",control,render:function render(_ref3){var field=_ref3.field,error=_ref3.fieldState.error;return(0,jsx_runtime.jsx)(components.UP,_objectSpread({id:"title",label:"Заголовок",dimension:"small",extraError:null==error?void 0:error.message,placeholder:"Введите заголовок",required:!0},field))}}),(0,jsx_runtime.jsx)(index_esm.Qr,{name:"price",control,render:function render(_ref4){var field=_ref4.field,error=_ref4.fieldState.error;return(0,jsx_runtime.jsx)(components.UP,_objectSpread({id:"price",label:"Цена",dimension:"small",extraError:null==error?void 0:error.message,placeholder:"Введите цену",required:!0},field))}})]}),(0,jsx_runtime.jsx)(index_esm.Qr,{name:"description",control,render:function render(_ref5){var field=_ref5.field,error=_ref5.fieldState.error;return(0,jsx_runtime.jsx)(components.UP,_objectSpread({id:"description",label:"Описание",dimension:"small",placeholder:"Введите описание",extraError:null==error?void 0:error.message},field))}}),(0,jsx_runtime.jsx)(index_esm.Qr,{name:"operationType",control,render:function render(_ref6){var field=_ref6.field,error=_ref6.fieldState.error,currentOption=OperationForm_options.find((function(item){return item.value===field.value}));return(0,jsx_runtime.jsxs)("div",{className:OperationForm_OperationForm_module.select,children:[(0,jsx_runtime.jsxs)("label",{className:OperationForm_OperationForm_module.select_label,children:[(0,jsx_runtime.jsxs)("span",{className:OperationForm_OperationForm_module.select_labelText,children:["Тип операции ",(0,jsx_runtime.jsx)("span",{className:OperationForm_OperationForm_module.select_labelRequired,children:"*"})]}),(0,jsx_runtime.jsx)(react_select_esm.ZP,_objectSpread(_objectSpread({},field),{},{options:OperationForm_options,placeholder:"Выберите тип операции",value:currentOption,styles:{control:function control(baseStyles){return _objectSpread(_objectSpread({},baseStyles),{},{borderRadius:"25px",height:"46px",backgroundColor:"#eff6ff",paddingLeft:"10px",border:"1px solid transparent"},null!=error&&error.message?{backgroundColor:"#fee2e2",borderColor:"#f87171 !important"}:{})}}}))]}),error&&(0,jsx_runtime.jsx)("div",{className:OperationForm_OperationForm_module.select_error,children:null==error?void 0:error.message})]})}})]}),(0,jsx_runtime.jsxs)("div",{className:OperationForm_OperationForm_module.operationForm_btnGroup,children:[(0,jsx_runtime.jsx)(components.zx,{className:OperationForm_OperationForm_module.operationForm_cancel,type:"button",onClick:onClose,children:"Отмена"}),(0,jsx_runtime.jsx)(components.zx,{className:OperationForm_OperationForm_module.operationForm_submit,type:"submit",children:"Сохранить"})]})]})};OperationForm.displayName="OperationForm";try{OperationForm.displayName="OperationForm",OperationForm.__docgenInfo={description:"",displayName:"OperationForm",props:{operation:{defaultValue:null,description:"",name:"operation",required:!0,type:{name:"any"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/modules/OperationForm/OperationForm.tsx#OperationForm"]={docgenInfo:OperationForm.__docgenInfo,name:"OperationForm",path:"src/modules/OperationForm/OperationForm.tsx#OperationForm"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_Default$parameters2$,dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs");function OperationForm_stories_typeof(obj){return OperationForm_stories_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},OperationForm_stories_typeof(obj)}function OperationForm_stories_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function OperationForm_stories_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?OperationForm_stories_ownKeys(Object(source),!0).forEach((function(key){OperationForm_stories_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):OperationForm_stories_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function OperationForm_stories_defineProperty(obj,key,value){return(key=function OperationForm_stories_toPropertyKey(arg){var key=function OperationForm_stories_toPrimitive(input,hint){if("object"!==OperationForm_stories_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==OperationForm_stories_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===OperationForm_stories_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const OperationForm_stories={title:"modules/OperationForm",component:OperationForm,tags:["autodocs"],argTypes:{operation:{description:"Текущая операция"},isOpen:{description:"Состояние открытия модального окна"},onClose:{type:"function",description:"Событие закрытия модального окна"}}};var Default={args:{operation:null,isOpen:!1,onClose:(0,dist.aD)("onClose")}};Default.parameters=OperationForm_stories_objectSpread(OperationForm_stories_objectSpread({},Default.parameters),{},{docs:OperationForm_stories_objectSpread(OperationForm_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:OperationForm_stories_objectSpread({originalSource:"{\n  args: {\n    operation: null,\n    isOpen: false,\n    onClose: action('onClose')\n  }\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/modules/OperationForm/OperationForm.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".XHW75fce7Xa102Ad6oiQ{display:flex;flex-direction:column;justify-content:space-between;height:100%}.p0691RoW54z9nhlBPcGH{display:flex;gap:16px;justify-content:flex-end;margin-top:16px}.vZGhax6j_0_CM7Ja3LLq{display:flex;gap:8px}.xJtokavs8ZA8ap_2_DCJ{position:relative;margin-bottom:20px;margin-left:20px}.evGx8I1fwfHtFFw6Yl0X{margin-bottom:4px;color:#64748b}.JbGCOFDnj1G9iEQPsK2l{color:#f87171}.dZS8CIY3CGIAZXqcaL6w{display:flex;gap:8px;width:min-content}.mnArM3GvegoUNJlHS8iB path{fill:#22c55e}.z9ipL54QR1Zq2FP1j94q path{fill:#ef4444}.Ep6jLY2O4KNrRmoq56xB{position:absolute;bottom:-20px;color:#f87171;font-size:12px;line-height:16px}.iJHNj0yhuuAiG0K_uRBL{position:relative;margin-bottom:25px}.Ha1UpY9hM4UxPrAMdFja{position:relative;left:20px;display:inline-block;margin-bottom:4px;color:#64748b}.AJKKr7quKJGWD5vmaKjs{color:#f87171}.MoPAxB76Yu3DK34JArgJ{position:absolute;bottom:-20px;left:20px;color:#f87171;font-size:12px;line-height:16px}","",{version:3,sources:["webpack://./src/modules/OperationForm/OperationForm.module.scss"],names:[],mappings:"AAAA,sBACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CAEA,sBACE,YAAA,CACA,QAAA,CACA,wBAAA,CACA,eAAA,CAGF,sBACE,YAAA,CACA,OAAA,CAIJ,sBACE,iBAAA,CACA,kBAAA,CACA,gBAAA,CAEA,sBACE,iBAAA,CACA,aAAA,CAEA,sBACE,aAAA,CAIJ,sBACE,YAAA,CACA,OAAA,CACA,iBAAA,CAMA,2BACE,YAAA,CAKF,2BACE,YAAA,CAIJ,sBACE,iBAAA,CACA,YAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA,CAIJ,sBACE,iBAAA,CACA,kBAAA,CAEA,sBACE,iBAAA,CACA,SAAA,CACA,oBAAA,CACA,iBAAA,CACA,aAAA,CAGF,sBACE,aAAA,CAGF,sBACE,iBAAA,CACA,YAAA,CACA,SAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA",sourcesContent:[".operationForm {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n\n  &_btnGroup {\n    display: flex;\n    gap: 16px;\n    justify-content: flex-end;\n    margin-top: 16px;\n  }\n\n  &_group {\n    display: flex;\n    gap: 8px;\n  }\n}\n\n.checkboxGroup {\n  position: relative;\n  margin-bottom: 20px;\n  margin-left: 20px;\n\n  &_label {\n    margin-bottom: 4px;\n    color: #64748b;\n\n    &_required {\n      color: #f87171;\n    }\n  }\n\n  &_wrap {\n    display: flex;\n    gap: 8px;\n    width: min-content;\n  }\n}\n\n.icon {\n  &__income {\n    & path {\n      fill: rgb(34 197 94);\n    }\n  }\n\n  &__expense {\n    & path {\n      fill: rgb(239 68 68);\n    }\n  }\n\n  &_error {\n    position: absolute;\n    bottom: -20px;\n    color: #f87171;\n    font-size: 12px;\n    line-height: 16px;\n  }\n}\n\n.select {\n  position: relative;\n  margin-bottom: 25px;\n\n  &_labelText {\n    position: relative;\n    left: 20px;\n    display: inline-block;\n    margin-bottom: 4px;\n    color: #64748b;\n  }\n\n  &_labelRequired {\n    color: #f87171;\n  }\n\n  &_error {\n    position: absolute;\n    bottom: -20px;\n    left: 20px;\n    color: #f87171;\n    font-size: 12px;\n    line-height: 16px;\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={operationForm:"XHW75fce7Xa102Ad6oiQ",operationForm_btnGroup:"p0691RoW54z9nhlBPcGH",operationForm_group:"vZGhax6j_0_CM7Ja3LLq",checkboxGroup:"xJtokavs8ZA8ap_2_DCJ",checkboxGroup_label:"evGx8I1fwfHtFFw6Yl0X",checkboxGroup_label_required:"JbGCOFDnj1G9iEQPsK2l",checkboxGroup_wrap:"dZS8CIY3CGIAZXqcaL6w",icon__income:"mnArM3GvegoUNJlHS8iB",icon__expense:"z9ipL54QR1Zq2FP1j94q",icon_error:"Ep6jLY2O4KNrRmoq56xB",select:"iJHNj0yhuuAiG0K_uRBL",select_labelText:"Ha1UpY9hM4UxPrAMdFja",select_labelRequired:"AJKKr7quKJGWD5vmaKjs",select_error:"MoPAxB76Yu3DK34JArgJ"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);